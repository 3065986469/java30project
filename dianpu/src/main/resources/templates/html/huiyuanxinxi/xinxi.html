<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<title></title>
</head>
<style type="text/css">
</style>

<body>
	<div class="col-lg-12 mb-4" id="sb">
		<div class="card">
			<form>
				<div class="card-header">
					<label for="exampleInputEmail1">会员信息</label> <select
						style="width: 150px; height: 28px">
						<option>全部等级</option>
						<option v-for="w,index in dengji">{{w.djname}}</option>
					</select> <input type="text" maxlength="30" value="" name="keywords"
						class="inputText keywords" placeholder="查找">
					<button>查找</button>
					<button>导入会员</button>
					<button>导出会员</button>

					<!-- Button trigger modal -->
					<button type="button" data-toggle="modal" data-target="#huiyuan1">添加会员</button>

					<!-- Modal -->
					<div class="modal fade" id="huiyuan1" tabindex="-1" role="dialog"
						aria-labelledby="myModalLabel">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title" id="myModalLabel">添加会员</h4>
									<button type="button" class="close" data-dismiss="modal"
										aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<table style="margin: auto;">
										<tr>
											<td align="right">&nbsp;&nbsp;&nbsp;&nbsp;<span
												style="color: red;">*</span>手机
											</td>
											<td><input type="text" v-model="vip.vphone"></td>
											<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
											<td align="right"><span style="color: red;">*</span>名称</td>
											<td><input type="text" v-model="vip.vname"></td>
										</tr>
										<tr>
											<td>&nbsp;</td>
											<td>&nbsp;</td>
										</tr>
										<tr>
											<td align="right">等级</td>
											<td>
												<select style="width: 185px; height: 30px;" id="dsy" @change="djname()">
													<option>请选择等级</option>
													<option v-for="w,index in dengji">{{w.djname}}</option>
												</select>
												<input id="djidq">
												<input id="jifen">
											</td>
											<td></td>
											<td align="right">&nbsp;&nbsp;&nbsp;密码</td>
											<td><input type="text" v-model="vip.vpwd"></td>
										</tr>
										<tr>
											<td>&nbsp;</td>
											<td>&nbsp;</td>
										</tr>
										<tr>
											<td>&nbsp;&nbsp;&nbsp;&nbsp;地址</td>
											<td colspan="4">
											<select name="provlevel" id="provlevel"style="width: 120px; height: 30px;">
													<option>--请选择省份--</option>
											</select> <select name="citylevel" id="citylevel"style="width: 120px; height: 30px; margin-left: 2px">
													<option>--请选择城市--</option>
											</select> <select name="arealevel" id="arealevel"style="width: 120px; height: 30px; margin-left: 2px">
													<option>--请选择区/县--</option>
											</select> <input name="citysinfo" type="text" id="citysinfo"class="iptxt ie-iptxts" readonly >
											</td>
										</tr>
									</table>
								</div>
								<div class="modal-footer">
									<button type="button" data-dismiss="modal">取消</button>
									<button type="button" data-dismiss="modal" @click=hyadd()>确定</button>
								</div>
							</div>
						</div>
					</div>

				</div>
			</form>
			<div class="card-body">
				<table class="table card-text table table-hover">
					<thead>
						<tr>
							<th>序号</th>
							<th>姓名</th>
							<th>手机</th>
							<th>等级</th>
							<th>成交次数</th>
							<th>成交金额</th>
							<th>余额</th>
							<th>积分</th>
							<th>最近成交</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th scope="row">1</th>
							<td>---</td>
							<td>---</td>
							<td>---</td>
							<td>---</td>
							<td>---</td>
							<td>---</td>
							<td>---</td>
							<td>---</td>
							<td><a href="" data-toggle="modal" data-target="#huiyuan2">编辑</a>
							</td>
						</tr>
					</tbody>
				</table>
				<!-- Modal -->
				<div class="modal fade" id="huiyuan2" tabindex="-1" role="dialog"
					aria-labelledby="myModalLabel">
					<div class="modal-dialog modal-lg" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h4 class="modal-title" id="myModalLabel">编辑会员</h4>
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<table style="margin: auto;">
									<tr>
										<td align="right">&nbsp;&nbsp;&nbsp;&nbsp;<span
											style="color: red;">*</span>手机
										</td>
										<td><input type="text"></td>
										<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
										<td align="right"><span style="color: red;">*</span>名称</td>
										<td><input type="text"></td>
									</tr>
									<tr>
										<td>&nbsp;</td>
										<td>&nbsp;</td>
									</tr>
									<tr>
										<td align="right">等级</td>
										<td>
											<select style="width: 185px; height: 30px;">
												<option>初始等级</option>
												<option v-for="e,index in dengji">{{e.djname}}</option>
											</select>
										</td>
										<td></td>
										<td align="right">&nbsp;&nbsp;&nbsp;密码</td>
										<td><input type="text"></td>
									</tr>
									<tr>
										<td>&nbsp;</td>
										<td>&nbsp;</td>
									</tr>
									<tr>
										<td>&nbsp;&nbsp;&nbsp;&nbsp;地址</td>
										<td colspan="3">
										<select
											style="width: 100px; height: 30px;">
												<option>请选择省份</option>
										</select> - <select style="width: 100px; height: 30px;">
												<option>请选择城市</option>
										</select> - <select style="width: 100px; height: 30px;">
												<option>请选择地区</option>
										</select></td>
									</tr>
									<tr>
										<td>&nbsp;</td>
										<td>&nbsp;</td>
									</tr>
									<tr>
										<td align="right">街道</td>
										<td><input type="text"></td>
									</tr>
								</table>
							</div>
							<div class="modal-footer">
								<button type="button" data-dismiss="modal">取消</button>
								<button type="button">确定</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
 	<script type="text/javascript">
				var vue=new Vue({
					el:"#sb",
					data(){
						return{
							dengji:[],
							shengfen:[],
							vip:{}
						}
					},
					methods:{
						djqueryAll:function(){
							$.ajax({
								url:"[[@{/huiyuan/djquery}]]",
								type:"post",
								success:function(result){
									vue.dengji=result;
								}
							})
						},
						djname:function(){
							var name=$("#dsy").val();
							$.ajax({
								url:"[[@{/huiyuan/jdname}]]",
								type:"post",
								data:{name:name},
								success:function(result){
									$("#djidq").val(result.djid);
									$("#jifen").val(result.djxiaofei)
								}
							})
						},
						hyadd:function(){
							var djid=$("#djidq").val();
							var vaddress=$("#citysinfo").val();
							var vjifen=$("#jifen").val();
							vue.vip.djid=djid;
							vue.vip.vaddress=vaddress;
							vue.vip.vjifen=vjifen;
							vue.vip.vyue=0;
							vue.vip.sid=1;
							alert(JSON.stringify(vue.vip));
							 $.ajax({
								url:"[[@{/huiyuan/hyadd}]]",
								type:"post",
								data:JSON.stringify(vue.vip),
								contentType:"application/json;charset=utf-8",
								success:function(result){
									
								}
								
							}) 
						}
					},
					created:function(){
						this.djqueryAll();
					}
				})
			</script> 
			<script type="text/javascript" th:src="@{/js/dizhi.js}"></script>
</body>
</html>